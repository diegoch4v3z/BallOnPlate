

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Path Planning &mdash; NxSDK 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SLAYER Module" href="../slayer.html" />
    <link rel="prev" title="Path Planning" href="../path_planning.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> NxSDK
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introductory Material</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nxapi.html">NxAPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nxnet.html">NxNet API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nxcore.html">NxCore API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../composable.html">Composability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../embedded_execution_engine.html">Embedded Execution Engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../modules.html">Nx SDK Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../characterization.html">Characterization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dnn.html">DNN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dvs.html">DVS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../epl.html">EPL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../knn.html">K Nearest Neighbour</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input_generator.html">Input Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lca.html">LCA</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../path_planning.html">Path Planning</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Path Planning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#1.-Loading-the-graph">1. Loading the graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="#2.-Setting-up-the-network">2. Setting up the network</a></li>
<li class="toctree-l4"><a class="reference internal" href="#3.-Setting-the-destination">3. Setting the destination</a></li>
<li class="toctree-l4"><a class="reference internal" href="#4.-Printing-out-the-obtained-source">4. Printing out the obtained source</a></li>
<li class="toctree-l4"><a class="reference internal" href="#5.-Setting-up-the-snip">5. Setting up the snip</a></li>
<li class="toctree-l4"><a class="reference internal" href="#6.-Running-the-network">6. Running the network</a></li>
<li class="toctree-l4"><a class="reference internal" href="#7.-Getting-the-time-when-the-source-spikes">7. Getting the time when the source spikes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#8.-Calculating-the-Shortest-Path">8. Calculating the Shortest Path</a></li>
<li class="toctree-l4"><a class="reference internal" href="#9.-Tracing-the-Synaptic-entries-to-get-the-shortest-path">9. Tracing the Synaptic entries to get the shortest path</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../slayer.html">SLAYER Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../slic.html">SLIC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spike_streamer.html">Spike Streamer Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../trace_injection.html">Trace Injection Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../performance-suite.html">NxSDK Performance Test Suite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html">NxSDK Release History</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NxSDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../modules.html">Nx SDK Modules</a> &raquo;</li>
        
          <li><a href="../path_planning.html">Path Planning</a> &raquo;</li>
        
      <li>Path Planning</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Copyright © 2019-2021 Intel Corporation.</span>
<span class="c1">#</span>
<span class="c1"># This software and the related documents are Intel copyrighted</span>
<span class="c1"># materials, and your use of them is governed by the express</span>
<span class="c1"># license under which they were provided to you (License). Unless</span>
<span class="c1"># the License provides otherwise, you may not use, modify, copy,</span>
<span class="c1"># publish, distribute, disclose or transmit  this software or the</span>
<span class="c1"># related documents without Intel&#39;s prior written permission.</span>
<span class="c1">#</span>
<span class="c1"># This software and the related documents are provided as is, with</span>
<span class="c1"># no express or implied warranties, other than those that are</span>
<span class="c1"># expressly stated in the License.</span>
</pre></div>
</div>
</div>
<div class="section" id="Path-Planning">
<h1>Path Planning<a class="headerlink" href="#Path-Planning" title="Permalink to this headline">¶</a></h1>
<p>This tutorial shows how to use the path planning model. Path planning model is based on the planning algorithm modeled after the operational principles of hippocampal place cells. The algorithm infers associations between neurons in a network from the asymmetric effects of STDP on a propagating sequence of spikes.</p>
<p>Consider a path planning problem where an autonomous agent is given a map of an environment and is required to plan paths to destination locations within it. The map is encoded in the spiking network of where neurons represent map locations and synaptic connections represent spatial associations between them. The path between the current location of the agent and one of the specified destinations can be found by propagating a spike wave from the destination and issuing motion commands in the
direction of the local synaptic vector. Thus to navigate to the destination after a spike wave propagates, the agent localizes itself with sensory cues, reads the path encoded in the local synaptic vector and generates successive motion commands towards the destination.</p>
<p>The synaptic weight between any two neurons in the network undergo activity-dependent plasticity based on the following learning rule:</p>
<p><img alt="title" src="../_images/path_planning_wavefront.png" /></p>
<p>The spiking thresholds of the neurons are chosen such that a postsynaptic spike is generated in response to multiple presynaptic spikes received within a short window of time. When every neuron is configured with an absolute after- spike refractory period, a localized cluster of spikes within the grid will generate a sequence of spikes as a result of the distance-dependent synaptic configuration. This is visualized as a two-dimensional propagating wavefront as shown in figure below.</p>
<p><img alt="title" src="../_images/path_planning_wavefront.png" /></p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">IFrame</span>
<span class="kn">from</span> <span class="nn">nxsdk_modules.path_planning.src.nxcore.path_planning</span> <span class="kn">import</span> <span class="n">PathPlanning</span>
<span class="kn">from</span> <span class="nn">nxsdk_modules.path_planning.src.visualization.export_graph_wavefront_to_html</span> <span class="kn">import</span> <span class="n">ExportGraphWavefrontToHtml</span>
<span class="kn">from</span> <span class="nn">nxsdk.graph.monitor.probes</span> <span class="kn">import</span> <span class="n">SpikeProbeCondition</span>
</pre></div>
</div>
</div>
<div class="section" id="1.-Loading-the-graph">
<h2>1. Loading the graph<a class="headerlink" href="#1.-Loading-the-graph" title="Permalink to this headline">¶</a></h2>
<p>Path planning model needs graph in form of Spiking Neural Network with Neurons representing nodes in the graph and synaptic connection edges. The graph we will use for tutorial is 2d 4x4 graph consisting of 16 neurons with all to all connectivity. After obtaining the graph directory, instantiate the Path Planning model.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">graphDir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/../data/2d4&quot;</span>
<span class="n">graphDir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/../data/2d10&quot;</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">PathPlanning</span><span class="p">(</span><span class="n">graphDir</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="2.-Setting-up-the-network">
<h2>2. Setting up the network<a class="headerlink" href="#2.-Setting-up-the-network" title="Permalink to this headline">¶</a></h2>
<p>In this phase the network is setup : graph is read from the given directory and all the required nodesets are configured.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">chipInfo</span><span class="p">,</span> <span class="n">board</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">setupNetwork</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Number of chips : 1
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Reading File : /home/wildandr/projects/nxsdk/nxsdk_modules/path_planning/tutorials/../data/2d10/chip0.binary chipId : 0
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  numCores: 1
</pre></div></div>
</div>
</div>
<div class="section" id="3.-Setting-the-destination">
<h2>3. Setting the destination<a class="headerlink" href="#3.-Setting-the-destination" title="Permalink to this headline">¶</a></h2>
<p>Each graph has a destination and source written in the file. In this step we get the source and destination and then set the bias for the destination so that it spikes in the next timestep.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Read targets</span>
<span class="n">targetList</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">readTargets</span><span class="p">(</span><span class="n">graphDir</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
    <span class="s2">&quot;Target :&quot;</span>
    <span class="s2">&quot; chipId: </span><span class="si">{}</span><span class="s2">&quot;</span>
    <span class="s2">&quot; coreId: </span><span class="si">{}</span><span class="s2">&quot;</span>
    <span class="s2">&quot; compartmentId: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">targetList</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;chipId&#39;</span><span class="p">],</span>
        <span class="n">targetList</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;coreId&#39;</span><span class="p">],</span>
        <span class="n">targetList</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;compartmentId&#39;</span><span class="p">]))</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setTargetBias</span><span class="p">(</span><span class="n">targetList</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Target : chipId: 0 coreId: 0 compartmentId: 99
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Setting target Bias: 128 chipId: 0 coreId: 0 compartmentId: 99
</pre></div></div>
</div>
</div>
<div class="section" id="4.-Printing-out-the-obtained-source">
<h2>4. Printing out the obtained source<a class="headerlink" href="#4.-Printing-out-the-obtained-source" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">sourceChipId</span> <span class="o">=</span> <span class="n">targetList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;chipId&#39;</span><span class="p">]</span>
<span class="n">sourceCoreId</span> <span class="o">=</span> <span class="n">targetList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;coreId&#39;</span><span class="p">]</span>
<span class="n">sourceCompartmentId</span> <span class="o">=</span> <span class="n">targetList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;compartmentId&#39;</span><span class="p">]</span>
<span class="n">sourceCore</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">n2Chips</span><span class="p">[</span><span class="n">sourceChipId</span><span class="p">]</span><span class="o">.</span><span class="n">n2Cores</span><span class="p">[</span><span class="n">sourceCoreId</span><span class="p">]</span>
<span class="n">graph</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
    <span class="s2">&quot;Source :&quot;</span>
    <span class="s2">&quot; chipId: </span><span class="si">{}</span><span class="s2">&quot;</span>
    <span class="s2">&quot; coreId: </span><span class="si">{}</span><span class="s2">&quot;</span>
    <span class="s2">&quot; compartmentId: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">sourceChipId</span><span class="p">,</span>
            <span class="n">sourceCoreId</span><span class="p">,</span>
            <span class="n">sourceCompartmentId</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Source : chipId: 0 coreId: 0 compartmentId: 0
</pre></div></div>
</div>
</div>
<div class="section" id="5.-Setting-up-the-snip">
<h2>5. Setting up the snip<a class="headerlink" href="#5.-Setting-up-the-snip" title="Permalink to this headline">¶</a></h2>
<p>In this step we setup the snip, which creates a snip in the mgmt phase and also creates a channel, which will be used to communicate when the spike from the destination reached the source.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">spikeTimeChannel</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">setupSnip</span><span class="p">(</span><span class="n">sourceChipId</span><span class="p">)</span>

<span class="c1"># Define probes</span>
<span class="n">mon</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">monitor</span>

<span class="c1"># tStart = 10000000 (any large value so that the probe infrastrucutre on host doesn&#39;t kick-in for mgmt read)</span>
<span class="c1"># What creating a probe will do, is to create an output axon from cx to lmt counter 0x20</span>
<span class="c1"># Probe counters are assigned incrementally.</span>
<span class="c1"># If we would have created one more probe its lmt address would have been</span>
<span class="c1"># 0x21</span>
<span class="n">customSpikeProbeCond</span> <span class="o">=</span> <span class="n">SpikeProbeCondition</span><span class="p">(</span><span class="n">tStart</span><span class="o">=</span><span class="mi">10000000</span><span class="p">)</span>
<span class="n">spikeProbesCust</span> <span class="o">=</span> <span class="n">mon</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span>
    <span class="n">sourceCore</span><span class="o">.</span><span class="n">cxState</span><span class="p">,</span>
    <span class="p">[</span><span class="n">sourceCompartmentId</span><span class="p">],</span>
    <span class="s1">&#39;spike&#39;</span><span class="p">,</span>
    <span class="n">probeCondition</span><span class="o">=</span><span class="n">customSpikeProbeCond</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-black-intense-fg ansi-bold">WARNING</span>:<span class="ansi-blue-fg">DRV</span>:  <span class="ansi-yellow-fg">elementType would be deprecated in 0.9 in favor of messageSize, which provides more flexibility</span>
</pre></div></div>
</div>
</div>
<div class="section" id="6.-Running-the-network">
<h2>6. Running the network<a class="headerlink" href="#6.-Running-the-network" title="Permalink to this headline">¶</a></h2>
<p>In this step, we first run the network for 1 timestep to allow the destination to spike and then reset the bias of the target, so that it doesn’t spikes again. After that we run for arbitary large number of timesteps till the source spikes.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Run the network</span>
<span class="n">board</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># Reset target bias to prevent spiking</span>
<span class="n">graph</span><span class="o">.</span><span class="n">setTargetBias</span><span class="p">(</span><span class="n">targetList</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># Continue running the network</span>
<span class="n">board</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="n">aSync</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  SLURM is being run in background
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  Connecting to 134.134.68.81:36353
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Host server up..............Done 3.60s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Encoding axons/synapses.....Done 0.03s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Compiling Embedded snips....Done 0.64s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Encoding probes.............Done 0.63ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Booting up..................Done 2.59s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Configuring registers.......Done 0.01s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Transferring probes.........Done 2.95ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Transferring spikes.........Done 0.56ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Executing...................Done 1.73ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Processing timeseries.......Done 1.64ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  Executor: 1 timesteps...........Done 6.91s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Setting target Bias: 1 chipId: 0 coreId: 0 compartmentId: 99
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Configuring registers.......Done 4.71ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Transferring probes.........Done 0.89ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Transferring spikes.........Done 0.43ms
</pre></div></div>
</div>
</div>
<div class="section" id="7.-Getting-the-time-when-the-source-spikes">
<h2>7. Getting the time when the source spikes<a class="headerlink" href="#7.-Getting-the-time-when-the-source-spikes" title="Permalink to this headline">¶</a></h2>
<p>We use the channel we created in the snip to obtain the time at which the source spikes. We pause the execution after we know learning epoch has passed after source spiked.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">spikeTime</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1"># Read spiketime when shortest path is found</span>
<span class="n">spikeTime</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">spikeTimeChannel</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="c1"># Stop excution after epoch is passed</span>
<span class="n">spikeTime</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">spikeTimeChannel</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="n">board</span><span class="o">.</span><span class="n">pause</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="8.-Calculating-the-Shortest-Path">
<h2>8. Calculating the Shortest Path<a class="headerlink" href="#8.-Calculating-the-Shortest-Path" title="Permalink to this headline">¶</a></h2>
<p>The length of the shortest path is the timestep at which source spikes.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">graph</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Length of shortest path: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">spikeTime</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
<span class="n">graph</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Current timestep: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">spikeTime</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Length of shortest path: 19
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Current timestep: 24
</pre></div></div>
</div>
</div>
<div class="section" id="9.-Tracing-the-Synaptic-entries-to-get-the-shortest-path">
<h2>9. Tracing the Synaptic entries to get the shortest path<a class="headerlink" href="#9.-Tracing-the-Synaptic-entries-to-get-the-shortest-path" title="Permalink to this headline">¶</a></h2>
<p>We trace the synaptic entries from the source to destination to determine the shortest path.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">shortestPath</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">tracePathThroughSynapseWeights</span><span class="p">(</span><span class="n">targetList</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">targetList</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  List of nodes in the shortest path are:
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 0 Chip: 0 Core: 0 Compartment: 0
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 1 Chip: 0 Core: 0 Compartment: 10
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 2 Chip: 0 Core: 0 Compartment: 11
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 3 Chip: 0 Core: 0 Compartment: 21
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 4 Chip: 0 Core: 0 Compartment: 22
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 5 Chip: 0 Core: 0 Compartment: 23
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 6 Chip: 0 Core: 0 Compartment: 24
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 7 Chip: 0 Core: 0 Compartment: 25
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 8 Chip: 0 Core: 0 Compartment: 26
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 9 Chip: 0 Core: 0 Compartment: 27
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 10 Chip: 0 Core: 0 Compartment: 28
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 11 Chip: 0 Core: 0 Compartment: 29
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 12 Chip: 0 Core: 0 Compartment: 39
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 13 Chip: 0 Core: 0 Compartment: 49
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 14 Chip: 0 Core: 0 Compartment: 59
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 15 Chip: 0 Core: 0 Compartment: 69
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 16 Chip: 0 Core: 0 Compartment: 79
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 17 Chip: 0 Core: 0 Compartment: 89
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">PATH_PLANNING</span>:  Node: 18  Chip: 0  Core: 0  Compartment: 99
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ExportGraphWavefrontToHtml</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span><span class="o">.</span><span class="n">publish</span><span class="p">()</span>
<span class="n">IFrame</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="s2">&quot;wavefront.html&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;500px&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<iframe
    width="100%"
    height="500px"
    src="wavefront.html"
    frameborder="0"
    allowfullscreen
></iframe></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">board</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../slayer.html" class="btn btn-neutral float-right" title="SLAYER Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../path_planning.html" class="btn btn-neutral float-left" title="Path Planning" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018-2021, Intel Corporation.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>