

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>21. Stubs and NetModules &mdash; NxSDK 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="23. Implementation of a multi-compartment neuron with self-reward feedback" href="s_multicx_neuron_self_reward.html" />
    <link rel="prev" title="20. Connection Sharing" href="q_connection_sharing.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> NxSDK
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introductory Material</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nxapi.html">NxAPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nxnet.html">NxNet API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nxcore.html">NxCore API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../composable.html">Composability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../embedded_execution_engine.html">Embedded Execution Engine</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../nxnet_tutorials.html">NxNet Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../nxnet_jupyter_tutorials.html">NxNet Jupyter Tutorials</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="a_compartment_setup.html">1. Compartment, CompartmentPrototype and Probes Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="b_connecting_compartments.html">2. Connecting compartments</a></li>
<li class="toctree-l3"><a class="reference internal" href="c_stimulating_compartments.html">3. Stimulating compartments</a></li>
<li class="toctree-l3"><a class="reference internal" href="d_synaptic_plasticity.html">4. Synaptic plasticity</a></li>
<li class="toctree-l3"><a class="reference internal" href="e_neuronal_homeostasis.html">5. Neuronal homeostasis</a></li>
<li class="toctree-l3"><a class="reference internal" href="f_rewards_learning.html">6. Learning with Rewards</a></li>
<li class="toctree-l3"><a class="reference internal" href="g_snip_for_threshold_modulation.html">7. SNIPs</a></li>
<li class="toctree-l3"><a class="reference internal" href="h_reward_trace.html">8. Reward Trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="i_performance_profiling.html">9. Performance profiling</a></li>
<li class="toctree-l3"><a class="reference internal" href="j_soft_reset_core.html">10. Hard vs.Â soft membrane voltage reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="j_soft_reset_net.html">11. Soft reset membrane voltage</a></li>
<li class="toctree-l3"><a class="reference internal" href="k_interactive_spike_sender_receiver.html">12. Interactive Spike Sender and Spike Receivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="l_snip_for_compartment_setup_with_NxNet_C.html">13. Setup Compartments with NxNet C API</a></li>
<li class="toctree-l3"><a class="reference internal" href="m_independent_networks_in_same_run.html">14. Independent Networks in Same Run</a></li>
<li class="toctree-l3"><a class="reference internal" href="n_stochastic_networks.html">15. Stochastic Networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="n_stochastic_networks.html#C.-Puttin-It-All-Together">16. C. Puttin It All Together</a></li>
<li class="toctree-l3"><a class="reference internal" href="n_stochastic_networks.html#Modify-createWtaMotif1-to-Include-Detector-Neuron">17. Modify createWtaMotif1 to Include Detector Neuron</a></li>
<li class="toctree-l3"><a class="reference internal" href="o_snip_for_reading_lakemont_spike_count.html">18. Read Lakemont Spike Count</a></li>
<li class="toctree-l3"><a class="reference internal" href="p_composable_networks.html">19. Composable Networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="q_connection_sharing.html">20. Connection Sharing</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">21. Stubs and NetModules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Full-Specification-without-netmodules-or-stubs">21.1. Full Specification without netmodules or stubs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#With-Stubs">21.2. With Stubs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#NetModules">22. NetModules</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_multicx_neuron_self_reward.html">23. Implementation of a multi-compartment neuron with self-reward feedback</a></li>
<li class="toctree-l3"><a class="reference internal" href="t_vMinExp_and_vMaxExp.html">24. vMinExp and vMaxExp Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="u_join_op_in_multi_compartment_neuron.html">25. Neurons vs Compartments</a></li>
<li class="toctree-l3"><a class="reference internal" href="u_join_op_in_multi_compartment_neuron.html#Multi-compartment-neurons">26. Multi-compartment neurons</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../nxcore_tutorials.html">NxCore Tutorials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Nx SDK Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance-suite.html">NxSDK Performance Test Suite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html">NxSDK Release History</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">NxSDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../tutorials.html">Tutorials</a> &raquo;</li>
        
          <li><a href="../nxnet_jupyter_tutorials.html">NxNet Jupyter Tutorials</a> &raquo;</li>
        
      <li><span class="section-number">21. </span>Stubs and NetModules</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># INTEL CORPORATION CONFIDENTIAL AND PROPRIETARY</span>
<span class="c1">#</span>
<span class="c1"># Copyright Â© 2019-2021 Intel Corporation.</span>
<span class="c1">#</span>
<span class="c1"># This software and the related documents are Intel copyrighted</span>
<span class="c1"># materials, and your use of them is governed by the express</span>
<span class="c1"># license under which they were provided to you (License). Unless</span>
<span class="c1"># the License provides otherwise, you may not use, modify, copy,</span>
<span class="c1"># publish, distribute, disclose or transmit  this software or the</span>
<span class="c1"># related documents without Intel&#39;s prior written permission.</span>
<span class="c1">#</span>
<span class="c1"># This software and the related documents are provided as is, with</span>
<span class="c1"># no express or implied warranties, other than those that are</span>
<span class="c1"># expressly stated in the License.</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">nxsdk.api.n2a</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
<div class="section" id="Stubs-and-NetModules">
<h1><span class="section-number">21. </span>Stubs and NetModules<a class="headerlink" href="#Stubs-and-NetModules" title="Permalink to this headline">Â¶</a></h1>
<p>This tutorial demonstrates how to use Stubs to create partial connections and how these Stubs can be used as the inputs and outputs for NetModules.</p>
<p>Imagine a simple use case in which we want to create a âNetModuleâ for others to use. This NetModule can form part of a larger network, but we want to be able to specify the NetModule before having created the larger network.</p>
<p>As an example, letâs consider a simple use case in which we have two input neurons, and we want to compute the logical OR and logical AND of their spikes. The network would look something like Figure 1 below.</p>
<p>Figure 1. <img alt="Basic logic gate" src="../_images/jupyter_logic_gates.png" /></p>
<p>This is a fairly trivial network to create. We could do it like this:</p>
<div class="section" id="Full-Specification-without-netmodules-or-stubs">
<h2><span class="section-number">21.1. </span>Full Specification without netmodules or stubs<a class="headerlink" href="#Full-Specification-without-netmodules-or-stubs" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="Define-Compartments">
<h3><span class="section-number">21.1.1. </span>Define Compartments<a class="headerlink" href="#Define-Compartments" title="Permalink to this headline">Â¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">makeInputCompartments</span><span class="p">(</span><span class="n">net</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates the leftmost compartments in Figure 1&quot;&quot;&quot;</span>
    <span class="c1"># A prototype that spikes every time it receives an input spike and decays instantly</span>
    <span class="n">inputProto</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">vThMant</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                         <span class="n">compartmentVoltageDecay</span><span class="o">=</span><span class="mi">4095</span><span class="p">,</span>
                                         <span class="n">compartmentCurrentDecay</span><span class="o">=</span><span class="mi">4095</span><span class="p">,</span>
                                         <span class="n">functionalState</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">COMPARTMENT_FUNCTIONAL_STATE</span><span class="o">.</span><span class="n">IDLE</span><span class="p">)</span>

    <span class="n">compA</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartment</span><span class="p">(</span><span class="n">prototype</span><span class="o">=</span><span class="n">inputProto</span><span class="p">)</span>
    <span class="n">compB</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartment</span><span class="p">(</span><span class="n">prototype</span><span class="o">=</span><span class="n">inputProto</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">compA</span><span class="p">,</span> <span class="n">compB</span>

<span class="k">def</span> <span class="nf">makeOutputCompartments</span><span class="p">(</span><span class="n">net</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates the rightmost compartments in Figure 1&quot;&quot;&quot;</span>
    <span class="c1"># We&#39;ll make this the same as the input neurons... since we don&#39;t know how this netmodule</span>
    <span class="c1"># will be used, we don&#39;t really know the properties of the compartments it will connect to</span>
    <span class="n">outputProto</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">vThMant</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                         <span class="n">compartmentVoltageDecay</span><span class="o">=</span><span class="mi">4095</span><span class="p">,</span>
                                         <span class="n">compartmentCurrentDecay</span><span class="o">=</span><span class="mi">4095</span><span class="p">,</span>
                                         <span class="n">functionalState</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">COMPARTMENT_FUNCTIONAL_STATE</span><span class="o">.</span><span class="n">IDLE</span><span class="p">)</span>

    <span class="n">compAndOut</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartment</span><span class="p">(</span><span class="n">prototype</span><span class="o">=</span><span class="n">outputProto</span><span class="p">)</span>
    <span class="n">compOrOut</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartment</span><span class="p">(</span><span class="n">prototype</span><span class="o">=</span><span class="n">outputProto</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">compAndOut</span><span class="p">,</span> <span class="n">compOrOut</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">net</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">NxNet</span><span class="p">()</span>
<span class="n">compA</span><span class="p">,</span> <span class="n">compB</span> <span class="o">=</span> <span class="n">makeInputCompartments</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="n">compAndOut</span><span class="p">,</span> <span class="n">compOrOut</span> <span class="o">=</span> <span class="n">makeOutputCompartments</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>

<span class="c1"># AND and OR prototype neurons</span>
<span class="n">orProto</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">vThMant</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                                  <span class="n">compartmentVoltageDecay</span><span class="o">=</span><span class="mi">4095</span><span class="p">,</span>
                                  <span class="n">compartmentCurrentDecay</span><span class="o">=</span><span class="mi">4095</span><span class="p">,</span>
                                  <span class="n">functionalState</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">COMPARTMENT_FUNCTIONAL_STATE</span><span class="o">.</span><span class="n">IDLE</span><span class="p">)</span>

<span class="n">andProto</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">vThMant</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
                                   <span class="n">compartmentVoltageDecay</span><span class="o">=</span><span class="mi">4095</span><span class="p">,</span>
                                   <span class="n">compartmentCurrentDecay</span><span class="o">=</span><span class="mi">4095</span><span class="p">,</span>
                                   <span class="n">functionalState</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">COMPARTMENT_FUNCTIONAL_STATE</span><span class="o">.</span><span class="n">IDLE</span><span class="p">)</span>

<span class="n">compAnd</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartment</span><span class="p">(</span><span class="n">prototype</span><span class="o">=</span><span class="n">andProto</span><span class="p">)</span>
<span class="n">compOr</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartment</span><span class="p">(</span><span class="n">prototype</span><span class="o">=</span><span class="n">orProto</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<div class="section" id="Define-Connections">
<h3><span class="section-number">21.1.2. </span>Define Connections<a class="headerlink" href="#Define-Connections" title="Permalink to this headline">Â¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">connProto</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">ConnectionPrototype</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># input connections</span>
<span class="n">compA</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">compAnd</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>
<span class="n">compA</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">compOr</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>
<span class="n">compB</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">compAnd</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>
<span class="n">compB</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">compOr</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>

<span class="c1"># output connections</span>
<span class="n">compAnd</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">compAndOut</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>
<span class="n">compOr</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">compOrOut</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;nxsdk.net.nodes.connections.ConnectionCC at 0x7f80770a2ba8&gt;
</pre></div></div>
</div>
</div>
<div class="section" id="Stimulate-and-Run">
<h3><span class="section-number">21.1.3. </span>Stimulate and Run<a class="headerlink" href="#Stimulate-and-Run" title="Permalink to this headline">Â¶</a></h3>
<p>Weâll re-use this function a few times in the tutorial after constructing the network in different ways.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">stimulateAndRun</span><span class="p">(</span><span class="n">inputA</span><span class="p">,</span> <span class="n">inputB</span><span class="p">,</span> <span class="n">outputAnd</span><span class="p">,</span> <span class="n">outputOr</span><span class="p">,</span> <span class="n">net</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates spike gens, probes, and runs the network&quot;&quot;&quot;</span>
    <span class="c1"># Create Spike Generators</span>
    <span class="n">spikeGenA</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createSpikeGenProcess</span><span class="p">(</span><span class="n">numPorts</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">spikeGenB</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createSpikeGenProcess</span><span class="p">(</span><span class="n">numPorts</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c1"># connect spike gens to the inputs</span>
    <span class="n">spikeGenA</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">inputA</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>
    <span class="n">spikeGenB</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">inputB</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>

    <span class="c1"># Add spikes</span>
    <span class="n">spikesA</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">]</span>
    <span class="n">spikeGenA</span><span class="o">.</span><span class="n">addSpikes</span><span class="p">(</span><span class="n">spikeInputPortNodeIds</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">spikeTimes</span> <span class="o">=</span> <span class="n">spikesA</span><span class="p">)</span>

    <span class="n">spikesB</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">30</span><span class="p">]</span>
    <span class="n">spikeGenB</span><span class="o">.</span><span class="n">addSpikes</span><span class="p">(</span><span class="n">spikeInputPortNodeIds</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">spikeTimes</span> <span class="o">=</span> <span class="n">spikesB</span><span class="p">)</span>

    <span class="c1"># Probe the outputs</span>
    <span class="n">spikesAnd</span> <span class="o">=</span> <span class="n">outputAnd</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">SPIKE</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">spikesOr</span> <span class="o">=</span> <span class="n">outputOr</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">ProbeParameter</span><span class="o">.</span><span class="n">SPIKE</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Run</span>
    <span class="n">net</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">net</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A spike times: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">spikesA</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;B spike times: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">spikesB</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;AND spike times: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">spikesAnd</span><span class="o">.</span><span class="n">data</span><span class="p">)))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;OR spike times: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">spikesOr</span><span class="o">.</span><span class="n">data</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<p>You should see the AND and OR compartments spiking 2 timesteps after the inputs</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">stimulateAndRun</span><span class="p">(</span><span class="n">compA</span><span class="p">,</span> <span class="n">compB</span><span class="p">,</span> <span class="n">compAndOut</span><span class="p">,</span> <span class="n">compOrOut</span><span class="p">,</span> <span class="n">net</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/home/gorchard/nxsdk-nxsdk/nxsdk/graph/nxinputgen/../../snips/
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  SLURM is being run in background
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  Connecting to 134.134.68.81:33923
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Host server up..............Done 0.16s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Encoding axons/synapses.....Done 1.74ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Compiling snips.............Done 0.20s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Booting up..................Done 2.60s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Encoding probes.............Done 0.12ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Configuring registers.......Done 3.23ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Transferring spikes.........Done 1.32ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Transferring probes.........Done 2.66ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Executing...................Done 5.87ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Processing timeseries.......Done 1.69ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  Executor: 100 timesteps.........Done 3.00s
A spike times: [10, 20]
B spike times: [10, 30]
AND spike times: (array([12]),)
OR spike times: (array([12, 22, 32]),)
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="With-Stubs">
<h2><span class="section-number">21.2. </span>With Stubs<a class="headerlink" href="#With-Stubs" title="Permalink to this headline">Â¶</a></h2>
<p>Now imagine we intend for this module to be used in a larger network. Ideally we would just define the AND and OR neurons and their input connection properties. This is where Stubs come in. Stubs can be used as placeholders for compartments which are not yet specified.</p>
<p>Figure 2 below shows a module which uses stubs for its input and output. We donât want the user to have to manually connect the input to both the AND and OR compartments and specify the connection properties, so we make a stub and specify the properties there.</p>
<p>Figure 2. <img alt="Basic logic gate with stubs" src="../_images/jupyter_logic_gates_stubs.png" /></p>
<p>A user can then add their own compartments and connect to from the stubs as shown in Figure 3 below. When this network is compiled, the network will collapse to become equivalent to Figure 1 at the very beginning of this tutorial.</p>
<p>Figure 3. <img alt="Basic logic gate with connected stubs" src="../_images/jupyter_logic_gates_stubs_connections.png" /></p>
<div class="section" id="Important-Points">
<h3><span class="section-number">21.2.1. </span>Important Points<a class="headerlink" href="#Important-Points" title="Permalink to this headline">Â¶</a></h3>
<ol class="arabic simple">
<li><p>A stub can have only one source. If you try to connect from multiple compartments to the same stub, NxNet will throw an error to tell you.</p></li>
<li><p>However, stubs can connect to multiple compartments, or an output stub can connect to multiple input stubs.</p></li>
<li><p>Connections to a stub have no properties. All the synaptic properties are defined in the connection between an input stub and any compartments it connects to.</p></li>
<li><p>Input stubs can only connect to compartments.</p></li>
<li><p>Output stubs can connect to either input stubs, or compartments.</p></li>
<li><p>Stubs can be used as groups, much like other NxNet primitives.</p></li>
</ol>
<p>Example use. ### Define the AND and OR compartments and stubs Weâll use the same protoypes we defined before. After this block weâll have a network with stubs as shown in Figure 2.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">net</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">NxNet</span><span class="p">()</span>

<span class="n">inputA</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createInputStub</span><span class="p">()</span>
<span class="n">inputB</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createInputStub</span><span class="p">()</span>

<span class="n">compAnd</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartment</span><span class="p">(</span><span class="n">prototype</span><span class="o">=</span><span class="n">andProto</span><span class="p">)</span>
<span class="n">compOr</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createCompartment</span><span class="p">(</span><span class="n">prototype</span><span class="o">=</span><span class="n">orProto</span><span class="p">)</span>

<span class="n">inputA</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">compAnd</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>
<span class="n">inputA</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">compOr</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>
<span class="n">inputB</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">compAnd</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>
<span class="n">inputB</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">compOr</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>

<span class="n">outputAnd</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createOutputStub</span><span class="p">()</span>
<span class="n">outputOr</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">createOutputStub</span><span class="p">()</span>

<span class="c1"># Note that these connections do not require a prototype</span>
<span class="n">compAnd</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">outputAnd</span><span class="p">)</span>
<span class="n">compOr</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">outputOr</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;nxsdk.net.nodes.connections.ConnectionCS at 0x7f8075d31240&gt;
</pre></div></div>
</div>
</div>
<div class="section" id="Add-input/output-compartments-and-connect-to-stubs">
<h3><span class="section-number">21.2.2. </span>Add input/output compartments and connect to stubs<a class="headerlink" href="#Add-input/output-compartments-and-connect-to-stubs" title="Permalink to this headline">Â¶</a></h3>
<p>After this block weâll have the network as shown in Figure 3.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">compA</span><span class="p">,</span> <span class="n">compB</span> <span class="o">=</span> <span class="n">makeInputCompartments</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="n">compAndOut</span><span class="p">,</span> <span class="n">compOrOut</span> <span class="o">=</span> <span class="n">makeOutputCompartments</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>

<span class="c1"># Note that these connections do not require a prototype</span>
<span class="n">compA</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">inputA</span><span class="p">)</span>
<span class="n">compB</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">inputB</span><span class="p">)</span>

<span class="c1"># These connections go through a synapse, and therefore require a prototype</span>
<span class="n">outputAnd</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">compAndOut</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>
<span class="n">outputOr</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">compOrOut</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id1">
<h3><span class="section-number">21.2.3. </span>Stimulate and Run<a class="headerlink" href="#id1" title="Permalink to this headline">Â¶</a></h3>
<p>Same as before. The behaviour should be identical to the first network we ran.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">stimulateAndRun</span><span class="p">(</span><span class="n">compA</span><span class="p">,</span> <span class="n">compB</span><span class="p">,</span> <span class="n">compAndOut</span><span class="p">,</span> <span class="n">compOrOut</span><span class="p">,</span> <span class="n">net</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/home/gorchard/nxsdk-nxsdk/nxsdk/graph/nxinputgen/../../snips/
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  SLURM is being run in background
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  Connecting to 134.134.68.81:38553
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Host server up..............Done 0.16s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Compiling snips.............Done 0.19s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Encoding axons/synapses.....Done 1.31ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Encoding probes.............Done 0.40ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Booting up..................Done 2.59s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Transferring spikes.........Done 1.73ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Transferring probes.........Done 2.38ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Configuring registers.......Done 3.33ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Executing...................Done 5.64ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Processing timeseries.......Done 2.07ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  Executor: 100 timesteps.........Done 2.98s
A spike times: [10, 20]
B spike times: [10, 30]
AND spike times: (array([12]),)
OR spike times: (array([12, 22, 32]),)
</pre></div></div>
</div>
</div>
</div>
</div>
<div class="section" id="NetModules">
<h1><span class="section-number">22. </span>NetModules<a class="headerlink" href="#NetModules" title="Permalink to this headline">Â¶</a></h1>
<p>Now imagine we want to package this code as a NetModule. A NetModule is a piece of code packaged in a manner that makes it easier for others to use. In particular, a NetModule inherits from the nx.NetModule class which has an âinputsâ and âoutputsâ property.</p>
<p>The user of of a netmodule can easily determine the inputs and outputs by looking at the âinputsâ and âoutputsâ properties. This will be shown in the example below.</p>
<p>When defining a netmodule, the super().__init__() function must be called. This will create an NxNet object for the netmodule. You can also optionally pass an NxNet object if you already have an NxNet object you would like to use.</p>
<ol class="arabic simple">
<li><p>Calling netmodule.getInputNames() will return a list of strings with the names of inputs to the module. You can connect to a particular name using source.connect(netmodule.inputs.name, â¦).</p></li>
<li><p>Similarly netmodule.getOutputNames() will return the output names, and they can be accessed using netmodule.outputs.name</p></li>
<li><p>If net is not passed to a netmodule, it will create itâs own, in which case you need to call net.addNet(netmodule.net) from the parent network. You can also just call net.addNet(netmodule).</p></li>
<li><p>netmodule.net will always return the NxNet object that the module belongs to.</p></li>
<li><p>The writer of the netmodule can add any helper functions they think are necessary. For example, setting up snips or sending data via snip channels, which would only be called long after the netmodule is created.</p></li>
</ol>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">class</span> <span class="nc">LogicGates</span><span class="p">(</span><span class="n">nx</span><span class="o">.</span><span class="n">NetModule</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">net</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_setupCompartments</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setupInputs</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setupOutputs</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_makeConnections</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_setupCompartments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates the AND and OR compartments&quot;&quot;&quot;</span>
        <span class="n">orProto</span> <span class="o">=</span> <span class="n">andProto</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">vThMant</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                                   <span class="n">compartmentVoltageDecay</span><span class="o">=</span><span class="mi">4095</span><span class="p">,</span>
                                   <span class="n">compartmentCurrentDecay</span><span class="o">=</span><span class="mi">4095</span><span class="p">,</span>
                                   <span class="n">functionalState</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">COMPARTMENT_FUNCTIONAL_STATE</span><span class="o">.</span><span class="n">IDLE</span><span class="p">)</span>
        <span class="n">andProto</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">CompartmentPrototype</span><span class="p">(</span><span class="n">vThMant</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
                                   <span class="n">compartmentVoltageDecay</span><span class="o">=</span><span class="mi">4095</span><span class="p">,</span>
                                   <span class="n">compartmentCurrentDecay</span><span class="o">=</span><span class="mi">4095</span><span class="p">,</span>
                                   <span class="n">functionalState</span><span class="o">=</span><span class="n">nx</span><span class="o">.</span><span class="n">COMPARTMENT_FUNCTIONAL_STATE</span><span class="o">.</span><span class="n">IDLE</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">compAnd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">createCompartment</span><span class="p">(</span><span class="n">prototype</span><span class="o">=</span><span class="n">andProto</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compOr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">createCompartment</span><span class="p">(</span><span class="n">prototype</span><span class="o">=</span><span class="n">orProto</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setupInputs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates the Input Stubs and adds them as inputs&quot;&quot;&quot;</span>
        <span class="n">inputStubA</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">createInputStub</span><span class="p">()</span>
        <span class="n">inputStubB</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">createInputStub</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addInput</span><span class="p">(</span><span class="n">inputStubA</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addInput</span><span class="p">(</span><span class="n">inputStubB</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setupOutputs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates the Output Stubs and adds them as outputs&quot;&quot;&quot;</span>
        <span class="n">outputStubAnd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">createOutputStub</span><span class="p">()</span>
        <span class="n">outputStubOr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">createOutputStub</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">addOutput</span><span class="p">(</span><span class="n">outputStubAnd</span><span class="p">,</span> <span class="s1">&#39;andGate&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addOutput</span><span class="p">(</span><span class="n">outputStubOr</span><span class="p">,</span> <span class="s1">&#39;orGate&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_makeConnections</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">connProto</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">ConnectionPrototype</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compAnd</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compOr</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compAnd</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compOr</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">compOr</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">orGate</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compAnd</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">andGate</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The netmodule we have written is just Figure 2 from above. We have used stubs as the inputs and outputs because it allows us to control the internal connectivity and connection properties, but in cases where this is not necessary, compartments and compartmentGroups can also directly be added as inputs and outputs. i.e.Â self.inputs.add(compartment, âcompartmentNameâ)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">net</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">NxNet</span><span class="p">()</span>

<span class="n">myModule</span> <span class="o">=</span> <span class="n">LogicGates</span><span class="p">()</span>

<span class="n">net</span><span class="o">.</span><span class="n">addNet</span><span class="p">(</span><span class="n">myModule</span><span class="p">)</span>

<span class="c1"># Determine which inputs and outputs this module has</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Input names are: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">myModule</span><span class="o">.</span><span class="n">getInputNames</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Output names are: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">myModule</span><span class="o">.</span><span class="n">getOutputNames</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Input names are: [&#39;b&#39;, &#39;a&#39;]
Output names are: [&#39;orGate&#39;, &#39;andGate&#39;]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># make the input and output compartments</span>
<span class="n">compA</span><span class="p">,</span> <span class="n">compB</span> <span class="o">=</span> <span class="n">makeInputCompartments</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
<span class="n">compAndOut</span><span class="p">,</span> <span class="n">compOrOut</span> <span class="o">=</span> <span class="n">makeOutputCompartments</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>

<span class="c1"># connect them to the module</span>
<span class="n">compA</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">myModule</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
<span class="n">compB</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">myModule</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>

<span class="n">myModule</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">andGate</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">compAndOut</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>
<span class="n">myModule</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">orGate</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">compOrOut</span><span class="p">,</span> <span class="n">prototype</span><span class="o">=</span><span class="n">connProto</span><span class="p">)</span>

<span class="c1"># Run the network as before</span>
<span class="n">stimulateAndRun</span><span class="p">(</span><span class="n">compA</span><span class="p">,</span> <span class="n">compB</span><span class="p">,</span> <span class="n">compAndOut</span><span class="p">,</span> <span class="n">compOrOut</span><span class="p">,</span> <span class="n">net</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
/home/gorchard/nxsdk-nxsdk/nxsdk/graph/nxinputgen/../../snips/
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  SLURM is being run in background
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  Connecting to 134.134.68.81:44961
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Host server up..............Done 0.11s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Compiling snips.............Done 0.19s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Encoding axons/synapses.....Done 1.45ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Encoding probes.............Done 0.11ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Booting up..................Done 2.59s
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Transferring probes.........Done 3.01ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Configuring registers.......Done 3.32ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Transferring spikes.........Done 1.61ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Executing...................Done 5.74ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:      Processing timeseries.......Done 1.38ms
<span class="ansi-black-intense-fg ansi-bold">INFO</span>:<span class="ansi-blue-fg">DRV</span>:  Executor: 100 timesteps.........Done 2.93s
A spike times: [10, 20]
B spike times: [10, 30]
AND spike times: (array([12]),)
OR spike times: (array([12, 22, 32]),)
</pre></div></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="s_multicx_neuron_self_reward.html" class="btn btn-neutral float-right" title="23. Implementation of a multi-compartment neuron with self-reward feedback" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="q_connection_sharing.html" class="btn btn-neutral float-left" title="20. Connection Sharing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018-2021, Intel Corporation.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>